"use strict";(self.webpackChunkmu_website=self.webpackChunkmu_website||[]).push([[9934],{79229:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>p,frontMatter:()=>r,metadata:()=>o,toc:()=>l});var t=s(74848),a=s(28453);const r={},i="\u4f7f\u7528NapCatQQ\u642d\u5efaQQ\u673a\u5668\u4eba",o={id:"Blog/QQBot/\u4f7f\u7528NapCatQQ\u642d\u5efaQQBot",title:"\u4f7f\u7528NapCatQQ\u642d\u5efaQQ\u673a\u5668\u4eba",description:"\u65f6\u95f4\uff1a2024\u5e746\u670811\u65e5",source:"@site/docs/Blog/05-QQBot/01-\u4f7f\u7528NapCatQQ\u642d\u5efaQQBot.md",sourceDirName:"Blog/05-QQBot",slug:"/Blog/QQBot/\u4f7f\u7528NapCatQQ\u642d\u5efaQQBot",permalink:"/docs/Blog/QQBot/\u4f7f\u7528NapCatQQ\u642d\u5efaQQBot",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Blog/05-QQBot/01-\u4f7f\u7528NapCatQQ\u642d\u5efaQQBot.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{},sidebar:"Blog",previous:{title:"\u4e0a\u4f20\u81f3github.io",permalink:"/docs/Blog/\u4e0a\u4f20\u81f3github.io"},next:{title:"\u811a\u672c\u529f\u80fd\u7f16\u5199\u2014\u2014bilibili\u673a\u5668\u4eba\u4e3a\u4f8b",permalink:"/docs/Blog/QQBot/\u811a\u672c\u529f\u80fd\u7f16\u5199"}},d={},l=[{value:"\u5b89\u88c5NapCatQQ",id:"\u5b89\u88c5napcatqq",level:2},{value:"\u542f\u52a8NatCatQQ",id:"\u542f\u52a8natcatqq",level:2},{value:"\u9996\u6b21\u767b\u5f55\u8be5QQ",id:"\u9996\u6b21\u767b\u5f55\u8be5qq",level:3},{value:"\u540e\u7eed\u542f\u52a8\u8be5QQ",id:"\u540e\u7eed\u542f\u52a8\u8be5qq",level:3},{value:"\u914d\u7f6eHTTP\u4e0eWS",id:"\u914d\u7f6ehttp\u4e0ews",level:2},{value:"API List",id:"api-list",level:2},{value:"\u6d4b\u8bd5\u6d88\u606f\u53d1\u9001",id:"\u6d4b\u8bd5\u6d88\u606f\u53d1\u9001",level:3}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",hr:"hr",img:"img",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"\u4f7f\u7528napcatqq\u642d\u5efaqq\u673a\u5668\u4eba",children:"\u4f7f\u7528NapCatQQ\u642d\u5efaQQ\u673a\u5668\u4eba"}),"\n",(0,t.jsx)(n.p,{children:"\u65f6\u95f4\uff1a2024\u5e746\u670811\u65e5"}),"\n",(0,t.jsx)(n.p,{children:"\u539f\u751f"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.p,{children:"\u9996\u5148\uff0c\u4f60\u9700\u8981\u62e5\u6709\u4e00\u4e2a\u516c\u7f51IP\uff0c\u53ef\u4ee5\u5728\u817e\u8baf\u4e91\u6216\u8005\u963f\u91cc\u4e91\u8d2d\u4e70\u4e00\u4e2awin\u670d\u52a1\u5668\u6216\u8005linux\u670d\u52a1\u5668\uff0c\u6211\u7528\u7684\u662f\u5728\u817e\u8baf\u4e91\u8fc7\u5e74\u7684\u65f6\u5019\u4fc3\u9500\u76842h2g\u7684ubuntu"}),"\n",(0,t.jsxs)(n.p,{children:["\u63a5\u7740\uff0c\u60a8\u9700\u8981\u8fdb\u5165NapCatQQ\u5b98\u7f51\u7b80\u5355\u4e86\u89e3\u4e00\u4e0b",(0,t.jsx)(n.a,{href:"https://napneko.github.io/zh-CN/guide/getting-started",children:"https://napneko.github.io/zh-CN/guide/getting-started"})]}),"\n",(0,t.jsx)(n.h2,{id:"\u5b89\u88c5napcatqq",children:"\u5b89\u88c5NapCatQQ"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u5168\u6587\u4f7f\u7528Linux\u670d\u52a1\u5668\u642d\u5efa"})}),"\n",(0,t.jsx)(n.p,{children:"\u9996\u5148\u4e0b\u8f7d\u5e76\u5b89\u88c5NapCatQQ"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"sudo apt install libgbm1 libasound2\r\nwget https://dldir1.qq.com/qqfile/qq/QQNT/8b4fdf81/linuxqq_3.2.7-23361_amd64.deb #\u4ee5\u5f53\u524d\u6700\u65b0\u7248\u4e3a\u51c6\r\nsudo apt install ./linuxqq_3.2.7-23361_amd64.deb -y\r\ncurl -L -o NapCat.linux.x64.zip https://github.com/NapNeko/NapCatQQ/releases/download/v1.5.4/NapCat.linux.x64.zip\r\n #\u4ee5\u5b98\u7f51\u6700\u65b0\u7248\u4e3a\u51c6\uff0c\u901f\u5ea6\u6162\u76f4\u63a5github\u4e0b\u8f7d\u540e\u4e0a\u4f20\u81f3\u670d\u52a1\u5668\r\nunzip NapCat.linux.x64.zip -d ./NapCat\r\ncd NapCat/NapCat.linux.x64/\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\u542f\u52a8natcatqq",children:"\u542f\u52a8NatCatQQ"}),"\n",(0,t.jsx)(n.h3,{id:"\u9996\u6b21\u767b\u5f55\u8be5qq",children:"\u9996\u6b21\u767b\u5f55\u8be5QQ"}),"\n",(0,t.jsxs)(n.p,{children:["\u5728",(0,t.jsx)(n.code,{children:"NapCat.linux.x64"}),"\u76ee\u5f55\u4e0b\u80fd\u770b\u5230",(0,t.jsx)(n.code,{children:"napcat.sh"}),"\u6587\u4ef6\uff0c\u6dfb\u52a0\u6743\u9650\u5e76\u542f\u52a8"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"chmod u+x ./napcat.sh\r\n./napcat.sh\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u6b64\u65f6\u8ba9\u626b\u7801\u767b\u5f55\uff0c\u7528\u624b\u673aQQ\u767b\u5f55\u4e0a\u63d0\u524d\u51c6\u5907\u597d\u7684QQ\u5c0f\u53f7\uff0c\u4e0a\u53f7\u4e4b\u540e\u626b\u63cf\u4e8c\u7ef4\u7801\uff0c\u63a8\u8350\u626b\u63cf\u4fdd\u5b58\u5230\u672c\u5730\u7684\u4e8c\u7ef4\u7801"}),"\n",(0,t.jsx)(n.h3,{id:"\u540e\u7eed\u542f\u52a8\u8be5qq",children:"\u540e\u7eed\u542f\u52a8\u8be5QQ"}),"\n",(0,t.jsxs)(n.p,{children:["\u4f7f\u7528-q\u91cd\u65b0\u767b\u5f55\u5373\u53ef\u65e0\u9700\u626b\u7801\uff0c\u4f8b\u5982",(0,t.jsx)(n.code,{children:"napcat.sh -q 1234567"})]}),"\n",(0,t.jsx)(n.h2,{id:"\u914d\u7f6ehttp\u4e0ews",children:"\u914d\u7f6eHTTP\u4e0eWS"}),"\n",(0,t.jsxs)(n.p,{children:["\u8bbf\u95ee\u4f60\u7684",(0,t.jsx)(n.code,{children:"http://IP:6099/webui/login.html"}),"\uff0ctoken\u5bc6\u7801\u53ef\u5728",(0,t.jsx)(n.code,{children:"./config/webui.json"}),"\u4e0b\u627e\u5230"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cat ./config/webui.json\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u8fdb\u5165\u540e\u5230\u4ee5\u4e0b\u754c\u9762"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image-20240611174716938",src:s(93571).A+"",width:"1888",height:"770"})}),"\n",(0,t.jsx)(n.p,{children:"\u5176\u4e2d\u60a8\u53ef\u4ee5\u4f7f\u7528ws\u670d\u52a1\u6216http\u670d\u52a1\u8fdb\u884c\u76d1\u542c\uff0c\u8fd9\u91cc\u4ee5HTTP\u4e3a\u4f8b\uff0c\u9700\u6253\u5f00\u670d\u52a1\u4e0e\u4e8b\u4ef6\u4e0a\u62a5\uff0c\u540c\u65f6\u8bbe\u7f6eAccess token"}),"\n",(0,t.jsx)(n.p,{children:"Access token\u6307\u7684\u662f\u5728\u4f7f\u7528api\u65f6\u9700\u8981\u5e26\u4e0a\u8be5token\u624d\u80fd\u6b63\u5e38\u6267\u884c\uff0c\u80fd\u591f\u9632\u6b62\u5176\u4ed6\u4eba\u5229\u7528HTTP\u670d\u52a1\u6765\u64cd\u63a7\u673a\u5668\u4eba"}),"\n",(0,t.jsx)(n.p,{children:"\u4e8b\u4ef6\u4e0a\u62a5\u662f\u5c06\u4e8b\u4ef6\u4e0a\u62a5POST\u4f20\u5165\u6307\u5b9aIP\uff0c\u5728flask\u76d1\u542c\u7684\u65f6\u5019\u80fd\u591f\u63a5\u53d7\u6d88\u606f"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image-20240611182137856",src:s(99646).A+"",width:"1897",height:"854"})}),"\n",(0,t.jsx)(n.p,{children:"\u5982\u679c\u6ca1\u6709\u4fee\u6539\u6210\u529f\uff0c\u53ef\u5728config/onebot11_QQ\u53f7.json\u4e2d\u8fdb\u884c\u4fee\u6539"}),"\n",(0,t.jsx)(n.h2,{id:"api-list",children:"API List"}),"\n",(0,t.jsxs)(n.p,{children:["NapCatQQ \u5b9e\u73b0\u4e86 ",(0,t.jsx)(n.a,{href:"https://11.onebot.dev/",children:"OneBot 11"})," \u4ee5\u53ca ",(0,t.jsx)(n.a,{href:"https://docs.go-cqhttp.org/api",children:"go-cqhttp"})," \u7684\u5927\u90e8\u5206 API\uff0c\u53ef\u4ee5\u76f4\u63a5\u70b9\u51fb\u67e5\u770bAPI\uff0c\u8be6\u7ec6\u53ef\u67e5\u770b",(0,t.jsx)(n.a,{href:"https://napneko.github.io/zh-CN/develop/api",children:"https://napneko.github.io/zh-CN/develop/api"})]}),"\n",(0,t.jsx)(n.h3,{id:"\u6d4b\u8bd5\u6d88\u606f\u53d1\u9001",children:"\u6d4b\u8bd5\u6d88\u606f\u53d1\u9001"}),"\n",(0,t.jsx)(n.p,{children:"\u5047\u8bbe\u5c0f\u53f7\u4e0e\u5927\u53f7\u521b\u5efa\u4e86\u4e00\u4e2a\u7fa4\u804a\uff0c\u8fd9\u91cc\u6d4b\u8bd5\u7684\u662f\u7fa4\u804a\u4e2d\u662f\u5426\u51fa\u73b0\u6307\u5b9a\u5b57\u7b26\u4e32\uff0c\u51fa\u73b0\u5219\u53d1\u9001\u4e00\u6761\u6d88\u606f\uff0c\u4ee5\u201c\u8098\u5b50\u201d\u548c\u201chello world\u201d\u4e3a\u4f8b"}),"\n",(0,t.jsx)(n.p,{children:"\u9996\u5148\u786e\u4fddpip\u5df2\u7ecf\u5b89\u88c5\u4e86flask\u548crequests"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"pip install flask requests\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u63a5\u7740\u7f16\u5199flask\u811a\u672c\uff0c\u76d1\u542c\u4e0a\u9762\u4e0a\u62a5\u5230\u7684\u4f4d\u7f6e"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"#main.py\r\nfrom flask import Flask, request\r\nimport requests\r\n\r\napp = Flask(__name__)\r\n\r\n# NapCatQQ API\u7684\u57fa\u7840URL\r\nbase_url = \"http://\u670d\u52a1\u5668IP:HTTP\u76d1\u542c\u7aef\u53e3\"\r\n\r\n# \u53d1\u9001\u7fa4\u804a\u6d88\u606f\u7684\u51fd\u6570\r\ndef send_group_message(group_id, message):\r\n    url = f\"{base_url}/send_group_msg\"\r\n    params = {\r\n        \"group_id\": group_id,\r\n        \"message\": message,\r\n        \"access_token\":\"\u4f60\u7684token\u503c\"\r\n    }\r\n    response = requests.get(url, params=params)\r\n\r\n    if response.status_code == 200:\r\n        print(\"Message sent successfully\")\r\n    else:\r\n        print(\"Failed to send message\")\r\n        print(response.status_code, response.text)\r\n\r\n@app.route('/', methods=['POST'])\r\ndef receive_event():\r\n    \u6307\u5b9a\u7fa4\u804a = 1234567\r\n    data = request.json\r\n    print(\"Received event:\", data)\r\n\r\n    # \u68c0\u67e5\u662f\u5426\u662f\u7fa4\u6d88\u606f\u4e8b\u4ef6\u5e76\u4e14\u662f\u76ee\u6807\u7fa4\u6d88\u606f\r\n    if data['post_type'] == 'message' and data['message_type'] == 'group' and data['group_id'] == \u6307\u5b9a\u7fa4\u804a:\r\n        # \u63d0\u53d6\u6d88\u606f\u5185\u5bb9\u5e76\u786e\u4fdd\u662f\u5b57\u7b26\u4e32\r\n        message_objects = data['message']\r\n        message = ''.join([m['data']['text'] for m in message_objects if m['type'] == 'text'])\r\n\r\n        print(f\"Processed message: {message}\")\r\n\r\n        # \u68c0\u67e5\u6d88\u606f\u5185\u5bb9\u662f\u5426\u5305\u542b\u201c\u8098\u5b50\u201d\r\n        if '\u8098\u5b50' in message:\r\n            send_group_message(\u6307\u5b9a\u7fa4\u804a, \"hello world\")\r\n\r\n    return \"OK\", 200\r\n\r\nif __name__ == '__main__':\r\n    app.run(host='0.0.0.0', port=7777)\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image-20240611184032370",src:s(73363).A+"",width:"1714",height:"135"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"image-20240611183956068",src:s(64217).A+"",width:"945",height:"176"})})]})}function p(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},93571:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/image-20240611174716938-ff5487fc0009bf9550f34f37c370adb4.png"},99646:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/image-20240611182137856-771c566536937421ce843608cec1c08d.png"},64217:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/image-20240611183956068-41f58b6ab514eb914795c72713de58f7.png"},73363:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/image-20240611184032370-42b38bd49577aeaba115df7feee62bc5.png"},28453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>o});var t=s(96540);const a={},r=t.createContext(a);function i(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);